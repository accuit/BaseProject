@model PresentationLayer.DreamWedds.Web.Models.UserPurchaseViewModel
@{
    ViewBag.Title = "Purchase";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section id="content">
    <div class="container">

        <div class="row">

            <div class="col-xs-12 text-center padding25">
                <p class="lead">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Curabitur eget leo at velit imperdiet varius. In eu ipsum vitae velit congue iaculis vitae at risus. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
            </div>
            @*<input id="btnIsSuccess" type="hidden" value="@ViewBag.IsSuccess" />
            <input id="btnShowMessage" type="hidden" value="@ViewBag.ShowMessage" />*@
            <div class="col-md-6">
                @if (ViewBag.ShowMessage == true)
                {
                    if (ViewBag.IsSuccess)
                    {
                        <div id="alert-success" class="alert alert-success alert-dismissible" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                            <strong>Thank you!</strong> for your purchase. Check your mailbox to login.
                        </div>
                    }
                    else if (!ViewBag.IsSuccess)
                    {
                        <div id="alert-danger" class="alert alert-danger alert-dismissible" role="alert">
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>
                            <strong>Error! </strong> @ViewBag.Message
                        </div>
                    }
                }

                <div class="padding25">
                    <h4>Fill your <b>Details</b></h4>
                </div>

                @using (Html.BeginForm("Purchase","Template"))
                {
                    @Html.HiddenFor(x => x.template.TemplateID)
                    @Html.HiddenFor(x => x.template.TemplateName)
                    @Html.HiddenFor(x => x.template.TemplateScreenshotUrl)
                    @Html.HiddenFor(x => x.template.TemplatePreviewUrl)
                    @Html.HiddenFor(x => x.template.COST)
                    @Html.HiddenFor(x => x.template.AboutTemplate)

                    @Html.HiddenFor(x => x.order.OrderStatus)
                    @Html.HiddenFor(x => x.order.PaymentMode)
                    @Html.HiddenFor(x => x.order.PaymentTerms)
                    @Html.HiddenFor(x => x.order.Amount)
                    @Html.HiddenFor(x => x.order.Discount)

                    @Html.HiddenFor(x => x.subscriptions.TemplateID)
                    @Html.HiddenFor(x => x.subscriptions.SubscriptionStatus)


                    <div class="row">
                        <div class="form-group col-md-6">
                            @Html.EditorFor(model => model.user.FirstName, new { htmlAttributes = new { @class = "form-control input-lg", @placeholder = "First Name*", required = true, maxlength = "50" } })
                        </div>
                        <div class="form-group col-md-6">
                            @Html.EditorFor(model => model.user.LastName, new { htmlAttributes = new { @class = "form-control input-lg", @placeholder = "Last Name*", required = true, maxlength = "50" } })
                        </div>
                        <div class="form-group col-md-6">
                            @Html.EditorFor(model => model.user.Phone, new { htmlAttributes = new { @class = "form-control input-lg", @placeholder = " Phone*", required = true, maxlength = "15" } })
                        </div>
                        <div class="form-group col-xs-12">

                            @Html.EditorFor(model => model.user.Email, new { htmlAttributes = new { @class = "form-control input-lg", @placeholder = "Email*", required = true, maxlength = "150" } })
                        </div>
                        <div class="form-group col-xs-6">
                            <input type="text" style="text-align: right;" class="form-control input-lg" value="Subscription Type" readonly="readonly" />
                            @*@Html.EditorFor(model => model.template.TemplateName, new { htmlAttributes = new { @class = "form-control input-lg", @readonly = true } })*@
                        </div>
                        @if (ViewBag.IsTrial)
                        {
                            @Html.HiddenFor(x => x.subscriptions.SubscriptionType)

                            <div class="form-group col-xs-6">
                                <input type="text" readonly="readonly" class="form-control input-lg" value=" TRIAL" />
                            </div>
                        }
                        else
                        {
                            <div class="form-group col-xs-6">
                                @Html.HiddenFor(x => x.subscriptions.SubscriptionType, new { id= "subscriptiontype" })
                                @Html.EnumDropDownListFor(model => model.subscriptions.SubscriptionTypeList, "Select Subscription", new { @class = "form-control", id= "subscriptiontypelist" })
                            </div>
                        }


                        <div class="form-group col-xs-12 text-left">
                            <button type="submit" class="btn btn-primary btn-lg"><i class="fa fa-send fa-fw"></i> Submit</button>
                        </div>
                    </div>
                }

            </div>

            <div class="col-md-6">
                <div class="padding25">
                    <h4>Your <b>Template</b></h4>
                </div>

                <section id="full-map" class="container-fluid map-container">

                    <div>
                        <img src="@Model.template.ThumbnailImageUrl" style="height: 400px;width: 600px;">
                    </div>

                </section>

            </div>


        </div>

    </div>
</section>

<script>
    if (btnIsSuccess.value() == true) {
        document.getElementById("alert-success").style.display = 'inline';
    }

    if (btnIsSuccess.value() == false) {
        document.getElementById("alert-danger").style.display = 'inline';
    }

    


</script>
